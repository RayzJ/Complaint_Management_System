<div class="container">
  <h2>Create a New Ticket</h2>
  <form (ngSubmit)="onSubmit()" #ticketForm="ngForm">
    <!-- Ticket Title -->
    <div class="form-group">
      <label for="title">Title</label>
      <input 
        type="text" 
        id="title" 
        class="form-control" 
        [(ngModel)]="ticket.title" 
        name="title" 
        required />
    </div>

    <!-- Ticket Description -->
    <div class="form-group">
      <label for="description">Description</label>
      <textarea 
        id="description" 
        class="form-control" 
        [(ngModel)]="ticket.description" 
        name="description" 
        required></textarea>
    </div>

    <!-- Ticket Priority -->
    <div class="form-group">
      <label for="priority">Priority</label>
      <select 
        id="priority" 
        class="form-control" 
        [(ngModel)]="ticket.priority" 
        name="priority">
        <option value="Low">Low</option>
        <option value="Medium">Medium</option>
        <option value="High">High</option>
      </select>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary" [disabled]="loading">
      Submit
    </button>
  </form>

  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-danger mt-3">
    {{ error }}
  </div>

  <!-- Assign Button for Admin -->
  <button *ngIf="ticket.id" (click)="openAssignDialog(ticket.id)" class="btn btn-warning">
    Assign Ticket
  </button>

  <!-- Assign Dialog -->
  <div *ngIf="isAssigning" class="assign-dialog">
    <h3>Select a Support Agent</h3>
    <ul>
      <li *ngFor="let agent of supportAgents" (click)="assignTicketToAgent(agent.id)">
        {{ agent.fullName }}
      </li>
    </ul>
  </div>
</div>
